<div class="row">
  <h1>Listing categories</h1>

  <%= link_to 'New Category', new_category_path %>
  <ul>
    <% @categories.each do |category| %>
     
        <li><%= category.name %>
          Products: <%= category.products.length %>
        <%= link_to 'Show', category %>
        <%= link_to 'Edit', edit_category_path(category) %>
        <%= link_to 'Destroy', category, method: :delete, data: { confirm: 'Are you sure?' } %></li>
        <li>
          <ul>
          <% category.sub_categories.each do |sub_category|  %>
          
            <li><%= sub_category.name  %>
              <%= link_to 'Show', sub_category %>
                  (<%= sub_category.products.length %>)
            </li>

            <% end %>
          </ul>
        </li>
    <% end %>
  </ul>
</div>